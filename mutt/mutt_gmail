# Paths ----------------------------------------------
source ~/dotfiles/mutt/mutt_common.config
set signature = ~/dotfiles/mutt/sig_gmail

# Basic Options --------------------------------------
set wait_key = no        # shut up, mutt
set mbox_type = Maildir  # mailbox type
set timeout = 3          # idle time before scanning
set mail_check = 0       # minimum time between scans
unset move               # gmail does that
set delete               # don't ask, just do
unset confirmappend      # don't ask, just do!
set quit                 # don't ask, just do!!
unset mark_old           # read/new is good enough for me
set beep_new             # bell on new mails
set pipe_decode          # strip headers and eval mimes when piping
set thorough_search      # strip headers and eval mimes before searching

# Sidebar Patch --------------------------------------
source ~/dotfiles/mutt/mutt_sidebar.config

# Header Options -------------------------------------
source ~/dotfiles/mutt/mutt_view.config


# Account Settings -----------------------------------

# Default inbox.
set spoolfile = "+bartek.taczala/Inbox"

# Alternate email addresses.

# Mailboxes to show in the sidebar.
mailboxes +'bartek.taczala/Inbox' \
         '+bartek.taczala/alberto' \
         '+bartek.taczala/mailing.lists.boost' \
         '+bartek.taczala/mailing.lists.isocpp' \
         '+bartek.taczala/mailing.lists.sailfish' \
         '+bartek.taczala/mailing.lists.wayland' \

# special folders.
set mbox = "+bartek.taczala/archive"
set postponed = "+bartek.taczala/drafts"


# Sync email
macro index o "<shell-escape>mbsync -c ~/dotfiles/mutt/mbsync_gmail bartek.taczala<enter>" "run mbox to sync inbox"

# Other key bindings
source ~/dotfiles/mutt/mutt_keybindings.config

set quote_regexp = "^( {0,4}[>|:#%]| {0,4}[a-z0-9]+[>|]+)+"
alternative_order text/plain text/enriched text/html

# View attachments properly.
bind attach <return> view-mailcap

# Colors 
source ~/dotfiles/mutt/vombatidae.mutt

# Auto HTML
auto_view text/html

# Gmail-style keyboard shortcuts
macro index ga "<change-folder>=[Gmail]/All Mail<enter>" "Go to all mail"
macro index gd "<change-folder>=[Gmail]/Drafts<enter>" "Go to drafts"
macro index gi "<change-folder>=bartek.taczala/INBOX<enter>" "Go to inbox"

#set query_command = "contacts -Sf '%eTOKEN%n' '%s' | sed -e 's/TOKEN/\t/g'"
set query_command="goobook query '%s'"
bind editor <Tab> complete-query
bind editor ^T    complete
